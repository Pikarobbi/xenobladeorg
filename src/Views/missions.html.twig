{% extends '_layout.html.twig' %}

{% block headline %}Missionen{% endblock %}
{% block submenu %}
{% endblock %}
{% block content %}
    <a href="http://www.xenoblade.org/extra-talente/">Missionen f&uuml;r freischaltbare Talente &raquo;</a><br/>
    <br />
    {% if not chapter is empty %}
        <h2>{{ chapter.name }}</h2>
    {% endif %}
    <br />
    <table class="guide-table" align="center">
        <tr class="tablehead">
            <td>
                Name:
            </td>
            <td>
                Ort:
            </td>
            <td>
                L&ouml;sung:
            </td>
            <td>
                Person:
            </td>
            <td>
                Verf&auml;llt nach:
            </td>
            <td>
                Belohnung:
            </td>
            <td style="text-align:center">
                Harmonie:
            </td>
        </tr>
        {% for mission in missions %}
        <tr class="{{ loop.index is odd ? "odd" : "even" }}">
            <td>{{ mission.name }}</td>
            <td>{{ mission.chapter.name }}</td>
            <td>
                {% if not mission.extraSkills is empty %}
                    {% for skill in mission.extraSkills %}
                        <i>Diese Mission schaltet {{ skill.character.name }} {% if skill.skill4 %}4{% else %}5{% endif %}. Charakterzug {{ skill.name }} frei</i><br/>
                    {% endfor %}
                {% endif %}
                {{ mission.solution|raw }}</td>
            <td><a href="/personen/#p{{ mission.person.pid }}">{{ mission.person.name }}</a></td>
            <td><center>{{ mission.timelimit|raw }}{% if mission.timelimit is empty %}-{% endif %}</center></td>
            <td>
                <ul>
                    <li>
                        {{ mission.ep }}
                    </li>
                    <li>
                        {{ mission.money }}
                    </li>
                    <li>
                        items
                    </li>
                </ul>
                {{ render(controller('App\\Controller\\ItemsController::missionLootList',
                    { 'missionItemRelations': mission.itemRelations }
                ))}}
            </td>
            <td style="text-align:center">{{ mission.harmonychange }} {% if not mission.harmonychange is empty %}*{% endif %}</td>
        </tr>
        {% endfor %}
    </table>
{% endblock %}